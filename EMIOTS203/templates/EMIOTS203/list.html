<!doctype html>
<html lang="en">

<head>
    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <title>EMIOTS203</title>
</head>

<body>



<!-- jQuery CDN hosted by Google -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--Waypoints from cloudflare cdn-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/shortcuts/infinite.min.js"></script>


<div class="infinite-container">
    {% for tweet in page_obj %}
        <div class="infinite-item">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ tweet.externalId }}</h5>
                    <p class="card-text">{{ tweet.date }}</p>

                    <table>
                        <tr>
                            <th>{{tweet.tweetHtml | safe}}</th>
                            <th>{{tweet.stockchart.chartHtml | safe}}</th>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    {% endfor %}
  </div>

  {% if page_obj.has_next %}
    <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">More</a>
  {% endif %}

  <script>
    var infinite = new Waypoint.Infinite({
      element: $('.infinite-container')[0],
      onAfterPageLoad: function () 
        {
            $.getScript("https://platform.twitter.com/widgets.js")
        }
    });
  </script>


<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</body>
</html>
